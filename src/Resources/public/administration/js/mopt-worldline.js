(function(){var e={637:function(){},102:function(){},49:function(){let e=Shopware.Classes.ApiService,{Application:t}=Shopware;class n extends e{constructor(e,t,n="api-test"){super(e,t,n)}check(t){let n=this.getBasicHeaders({});return this.httpClient.post(`_action/${this.getApiBasePath()}/test-connection`,t,{headers:n}).then(t=>e.handleResponse(t))}savemethod(t){let n=this.getBasicHeaders({});return this.httpClient.post(`_action/${this.getApiBasePath()}/savemethod`,t,{headers:n}).then(t=>e.handleResponse(t))}}t.addServiceProvider("apiTest",e=>new n(t.getContainer("init").httpClient,e.loginService))},924:function(){let e=Shopware.Classes.ApiService,{Application:t}=Shopware;class n extends e{constructor(e,t,n="transactions-control"){super(e,t,n)}statusCheck(t){let n=this.getBasicHeaders({});return this.httpClient.post(`_action/${this.getApiBasePath()}/status`,t,{headers:n}).then(t=>e.handleResponse(t))}capture(t){let n=this.getBasicHeaders({});return this.httpClient.post(`_action/${this.getApiBasePath()}/capture`,t,{headers:n}).then(t=>e.handleResponse(t))}cancel(t){let n=this.getBasicHeaders({});return this.httpClient.post(`_action/${this.getApiBasePath()}/cancel`,t,{headers:n}).then(t=>e.handleResponse(t))}refund(t){let n=this.getBasicHeaders({});return this.httpClient.post(`_action/${this.getApiBasePath()}/refund`,t,{headers:n}).then(t=>e.handleResponse(t))}enableButtons(t){let n=this.getBasicHeaders({});return this.httpClient.post(`_action/${this.getApiBasePath()}/enableButtons`,t,{headers:n}).then(t=>e.handleResponse(t))}getConfig(t){let n=this.getBasicHeaders({});return this.httpClient.post(`_action/${this.getApiBasePath()}/getConfig`,t,{headers:n}).then(t=>e.handleResponse(t))}getOneyPaymentConfig(t){let n=this.getBasicHeaders({});return this.httpClient.post(`_action/${this.getApiBasePath()}/getOneyPaymentOption`,t,{headers:n}).then(t=>e.handleResponse(t))}setOneyPaymentConfig(e){let t=this.getBasicHeaders({});return this.httpClient.post(`_action/${this.getApiBasePath()}/setOneyPaymentOption`,e,{headers:t})}}t.addServiceProvider("transactionsControl",e=>new n(t.getContainer("init").httpClient,e.loginService))},858:function(e,t,n){var i=n(637);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals),n(346).Z("b2246d08",i,!0,{})},41:function(e,t,n){var i=n(102);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals),n(346).Z("1ebb942c",i,!0,{})},346:function(e,t,n){"use strict";function i(e,t){for(var n=[],i={},s=0;s<t.length;s++){var a=t[s],r=a[0],o={id:e+":"+s,css:a[1],media:a[2],sourceMap:a[3]};i[r]?i[r].parts.push(o):n.push(i[r]={id:r,parts:[o]})}return n}n.d(t,{Z:function(){return h}});var s="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!s)throw Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var a={},r=s&&(document.head||document.getElementsByTagName("head")[0]),o=null,l=0,c=!1,d=function(){},u=null,m="data-vue-ssr-id",p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function h(e,t,n,s){c=n,u=s||{};var r=i(e,t);return y(r),function(t){for(var n=[],s=0;s<r.length;s++){var o=a[r[s].id];o.refs--,n.push(o)}t?y(r=i(e,t)):r=[];for(var s=0;s<n.length;s++){var o=n[s];if(0===o.refs){for(var l=0;l<o.parts.length;l++)o.parts[l]();delete a[o.id]}}}}function y(e){for(var t=0;t<e.length;t++){var n=e[t],i=a[n.id];if(i){i.refs++;for(var s=0;s<i.parts.length;s++)i.parts[s](n.parts[s]);for(;s<n.parts.length;s++)i.parts.push(f(n.parts[s]));i.parts.length>n.parts.length&&(i.parts.length=n.parts.length)}else{for(var r=[],s=0;s<n.parts.length;s++)r.push(f(n.parts[s]));a[n.id]={id:n.id,refs:1,parts:r}}}}function g(){var e=document.createElement("style");return e.type="text/css",r.appendChild(e),e}function f(e){var t,n,i=document.querySelector("style["+m+'~="'+e.id+'"]');if(i){if(c)return d;i.parentNode.removeChild(i)}if(p){var s=l++;t=w.bind(null,i=o||(o=g()),s,!1),n=w.bind(null,i,s,!0)}else t=v.bind(null,i=g()),n=function(){i.parentNode.removeChild(i)};return t(e),function(i){i?(i.css!==e.css||i.media!==e.media||i.sourceMap!==e.sourceMap)&&t(e=i):n()}}var b=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}();function w(e,t,n,i){var s=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=b(t,s);else{var a=document.createTextNode(s),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(a,r[t]):e.appendChild(a)}}function v(e,t){var n=t.css,i=t.media,s=t.sourceMap;if(i&&e.setAttribute("media",i),u.ssrId&&e.setAttribute(m,t.id),s&&(n+="\n/*# sourceURL="+s.sources[0]+" */\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var a=t[i]={id:i,exports:{}};return e[i](a,a.exports,n),a.exports}n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="bundles/moptworldline/",window?.__sw__?.assetPath&&(n.p=window.__sw__.assetPath+"/bundles/moptworldline/"),function(){"use strict";n(49),n(924);let{Component:e,Mixin:t}=Shopware;e.register("api-test-button",{template:'<div>\n    <br/>\n    <sw-button-process\n        :isLoading="isLoading"\n        :processSuccess="isSaveSuccessful"\n        @process-finish="saveFinish"\n        @click="check"\n    >{{ $tc(\'worldline.api-test-button.button\') }}</sw-button-process>\n    <br/>\n    <br/>\n</div>\n',props:["label"],inject:["apiTest"],mixins:[t.getByName("notification")],data(){return{isLoading:!1,isSaveSuccessful:!1}},computed:{pluginConfig(){let e=this.$parent;for(;void 0===e.actualConfigData;)e=e.$parent;return{сonfigData:e.actualConfigData,salesChannelId:e.currentSalesChannelId,button:this.$parent.$el.attributes.name.value}}},methods:{saveFinish(){this.isSaveSuccessful=!1},check(){this.isLoading=!0,this.apiTest.check(this.pluginConfig).then(e=>{e.success?(this.isSaveSuccessful=!0,this.createNotificationSuccess({title:this.$tc("worldline.api-test-button.title"),message:this.$tc("worldline.api-test-button.success")}),document.querySelector(".sw-extension-config__save-action").click()):this.createNotificationError({title:this.$tc("worldline.api-test-button.title"),message:this.$tc("worldline.api-test-button.error")+e.message}),this.isLoading=!1})}}}),n(41);let{Component:i,Mixin:s}=Shopware;i.register("payment-method-button",{template:'<div class="component">\n    <div class="headline">\n        <label>{{ $tc(\'worldline.payment-method-button.headline\') }}</label>\n    </div>\n    <div class="border">\n        <div class="subline">\n            <p class="subline">{{ $tc(\'worldline.payment-method-button.subline\') }}</p>\n            <p v-if="paymentMethodData.length > 5" class="select-all">\n                <span @click="selectAllCheckbox(true)">{{ $tc(\'worldline.payment-method-button.selectAll\') }}</span> |\n                <span @click="selectAllCheckbox(false)">{{ $tc(\'worldline.payment-method-button.deselectAll\') }}</span>\n            </p>\n        </div>\n        <span >{{ $tc(\'worldline.payment-method-button.activeLabel\') }}</span> |\n        <span >{{ $tc(\'worldline.payment-method-button.linkLabel\') }}</span>\n        <div class="border-inner">\n            <div v-if="displayMessage">\n                <p class="innerText">{{ displayMessage }}</p>\n            </div>\n            <div v-else v-for="item in paymentMethodData">\n                <div class="payment-method--container">\n                    <label class="switch">\n                        <input @click="selectSingleCheckbox(item.id)"\n                               type="checkbox"\n                               :id="item.id"\n                               :internalId="item.internalId"\n                               class="paymentMethod"\n                               :checked="item.isActive">\n                        <span class="slider round"></span>\n                    </label>\n                    <tab></tab>\n                    <tab></tab>\n                    <label class="switch">\n                        <input @click="selectSingleCheckboxIsLinked(item.id)"\n                               type="checkbox"\n                               :id="item.id_linked"\n                               :internalId="item.internalId"\n                               class="paymentMethod"\n                               :checked="item.isLinked">\n                        <span class="slider round"></span>\n                    </label>\n                    <tab></tab>\n                    <img :src="item.logo">\n                    <tab></tab>\n                    <label :for="item.label">{{item.label}}</label>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n',props:["label"],inject:["apiTest"],mixins:[s.getByName("notification")],data(){return{isLoading:!1,isSaveSuccessful:!1,paymentMethodData:[],displayMessage:null}},computed:{pluginConfig(){let e=this.$parent;for(;void 0===e.actualConfigData;)e=e.$parent;return{сonfigData:e.actualConfigData,salesChannelId:e.currentSalesChannelId,responseArray:this.createPaymentMethodsArray()}}},methods:{getSalesChannelId(){let e=this.$parent;for(;void 0===e.currentSalesChannelId;)e=e.$parent;return e.currentSalesChannelId},selectAllCheckbox(e){this.paymentMethodData.forEach(t=>{t.isActive=e,t.isLinked=e}),this.saveButton()},selectSingleCheckbox(e){let t=this.paymentMethodData.find(t=>t.id===e);t.isActive=!t.isActive,this.saveButton()},selectSingleCheckboxIsLinked(e){let t=this.paymentMethodData.find(t=>t.id===e);t.isLinked=!t.isLinked,this.saveButton()},createPaymentMethodsArray(){let e=[];return this.paymentMethodData.forEach(t=>{e.push({id:t.id,status:t.isActive,isLinked:t.isLinked,internalId:t.internalId})}),e},saveButton(){this.isLoading=!0,this.apiTest.savemethod({data:this.createPaymentMethodsArray(),salesChannelId:this.getSalesChannelId()}).then(e=>{e.success?this.isSaveSuccessful=!0:this.createNotificationError({title:this.$tc("worldline.payment-method-button.APITitle"),message:this.$tc("worldline.payment-method-button.errorAPI")+e.message}),this.isLoading=!1})},renderPaymentMethods(e){0===e.length?this.displayMessage=this.$tc("worldline.payment-method-button.requestEmpty"):(this.displayMessage=null,this.paymentMethodData=[],e.forEach(e=>{this.paymentMethodData.push({id:e.id,internalId:e.internalId,isActive:e.isActive,isLinked:e.isLinked,logo:e.logo,label:e.label})}))},getPaymentMethods(){this.displayMessage=this.$tc("worldline.payment-method-button.request"),this.isLoading=!0,this.apiTest.check(this.pluginConfig).then(e=>{e.success?this.renderPaymentMethods(e.paymentMethods):(this.displayMessage=this.$tc("worldline.payment-method-button.error"),this.createNotificationError({title:this.$tc("worldline.payment-method-button.title"),message:this.$tc("worldline.payment-method-button.error")+e.message})),this.isLoading=!1}).catch(e=>{this.displayMessage=this.$tc("worldline.payment-method-button.error"),this.isLoading=!1})}},mounted(){this.getPaymentMethods()}});let{Component:a,Utils:r,Mixin:o,Filter:l}=Shopware,{get:c,format:d}=r;a.register("mo-orders-unprocessed",{template:'<sw-container type="row" gap="15px">\n    <sw-data-grid\n            v-if="hasContent"\n            ref="dataGrid"\n            class="sw-order-line-items-grid__data-grid"\n            identifier="mo-order-line-item-grid"\n            :data-source="orderLineItems"\n            :columns="getLineItemColumns"\n            :show-settings="false"\n            :show-selection="false"\n            :showActions="false"\n            :is-loading="isLoading"\n            :compactMode="false"\n    >\n        <template #column-unprocessed="{ item, itemIndex }">\n            <sw-select-field v-model:value="Selection[itemIndex]" @update:value="setLinePrice(itemIndex, $event, item.unitPrice)">\n                <option :value="0">0</option>\n                <option v-for="n in item.unprocessed" :value="n">{{ n }}</option>\n            </sw-select-field>\n        </template>\n\n        <template #column-quantity="{ item }">\n            <span>{{ item.unprocessed }}x</span>\n        </template>\n\n        <template #column-unitPrice="{ item }">\n            <span>{{ currencyFilter(item.unitPrice, order.currency.shortName) }}</span>\n        </template>\n\n        <template #column-totalPrice="{ item, itemIndex }">\n            <span>{{ currencyFilter(itemPrices[itemIndex], order.currency.shortName) }}</span>\n        </template>\n    </sw-data-grid>\n\n    <sw-container v-if="hasContent" columns="1fr 120px min-content min-content" gap="15px" justify="stretch" align="stretch">\n        <div></div>\n        <sw-number-field class="moptWorldlineAmountToProcess" v-if="!lockedButton" @change="setCustomAmount" :value="amountToProcess" :min="0" :max="maxAmountToProcess" :fillDigits="true" />\n        <div v-else ></div>\n        <sw-button-process\n                :isLoading="isLoading"\n                :disabled="transactionDisabled"\n                :processSuccess="transactionSuccess.capture"\n                variant="ghost"\n                @click="capture"\n        >{{ $tc(\'worldline.capture-payment-button.button\') }}</sw-button-process>\n\n        <sw-button-process\n                :isLoading="isLoading"\n                :disabled="transactionDisabled"\n                :processSuccess="transactionSuccess.cancel"\n                variant="ghost-danger"\n                @click="cancel"\n        >{{ $tc(\'worldline.cancel-payment-button.button\') }}</sw-button-process>\n\n    </sw-container>\n\n    <div class="table--no-content" v-if="!hasContent">{{ $tc(\'worldline.transaction-control.table.empty\') }}</div>\n</sw-container>',inject:["transactionsControl"],mixins:[o.getByName("notification")],props:{order:{type:Object,required:!0},transactionId:{type:String,required:!0},paymentStatus:{type:Array,required:!0},maxCapture:{type:Number,required:!0},lockedButton:{type:Boolean,required:!0}},data(){return{transactionSuccess:{capture:!1,cancel:!1},Selection:[],isLoading:!1,itemPrices:[],amountToProcess:0}},mounted(){for(let e=0;e<this.orderLineItems.length;e++)this.itemPrices.push(0),this.Selection.push(0)},computed:{totalSelections(){return this.Selection.reduce((e,t)=>e+t,0)},maxAmountToProcess(){return this.maxCapture},orderLineItems(){return this.paymentStatus.filter(e=>e.unprocessed>0)},hasContent(){return this.orderLineItems.length>0},taxStatus(){return c(this.order,"taxStatus","")},unitPriceLabel(){return this.$tc("worldline.transaction-control.table.unitPrice")},linePriceLabel(){return"gross"===this.taxStatus?"sw-order.detailBase.columnTotalPriceGross":"sw-order.detailBase.columnTotalPriceNet"},getLineItemColumns(){return[{property:"quantity",dataIndex:"unprocessed",label:"sw-order.detailBase.columnQuantity",allowResize:!1,align:"right",width:"100px"},{property:"unprocessed",dataIndex:"unprocessed",label:"worldline.transaction-control.table.selected",allowResize:!1,align:"right",width:"150px"},{property:"label",dataIndex:"label",label:"sw-order.detailBase.columnProductName",allowResize:!1,primary:!0,multiLine:!0},{property:"unitPrice",dataIndex:"unitPrice",label:this.unitPriceLabel,allowResize:!1,align:"right",width:"120px"},{property:"totalPrice",dataIndex:"totalPrice",label:this.linePriceLabel,allowResize:!1,align:"right",width:"120px"}]},payloadItems(){let e=[];return this.orderLineItems.forEach((t,n)=>{e.push({id:t.id,quantity:this.Selection[n]})}),e},transactionDisabled(){return 0===this.amountToProcess&&0===this.totalSelections},currencyFilter(){return l.getByName("currency")}},methods:{capture(){let e={transactionId:this.transactionId,amount:this.amountToProcess,items:this.payloadItems};this.transactionsControl.capture(e).then(e=>{e.success?(this.transactionSuccess.capture=!0,setTimeout(()=>{location.reload()},1e3)):this.createNotificationError({title:this.$tc("worldline.capture-payment-button.title"),message:this.$tc("worldline.capture-payment-button.error")+e.message})}).finally(()=>{})},cancel(){this.isLoading=!0;let e={transactionId:this.transactionId,amount:this.amountToProcess,items:this.payloadItems};this.transactionsControl.cancel(e).then(e=>{e.success?(this.transactionSuccess.cancel=!0,setTimeout(()=>{location.reload()},1e3)):this.createNotificationError({title:this.$tc("worldline.cancel-payment-button.title"),message:this.$tc("worldline.cancel-payment-button.error")+e.message})}).finally(()=>{this.isLoading=!1})},setPriceSum(){this.amountToProcess=Math.min(this.itemPrices.reduce((e,t)=>e+t),this.maxAmountToProcess)},setLinePrice(e,t,n){this.itemPrices[e]=n*t,this.setPriceSum()},setCustomAmount(e){this.amountToProcess=e}}});let{Component:u,Utils:m,Mixin:p,Filter:h}=Shopware,{get:y,format:g}=m;u.register("mo-orders-paid",{template:'<sw-container type="row" gap="15px">\n    <sw-data-grid\n            v-if="hasContent"\n            ref="dataGrid"\n            class="sw-order-line-items-grid__data-grid"\n            identifier="mo-order-line-item-grid"\n            :data-source="orderLineItems"\n            :columns="getLineItemColumns"\n            :show-settings="false"\n            :show-selection="false"\n            :showActions="false"\n            :is-loading="isLoading"\n            :compactMode="false"\n    >\n        <template #column-refund="{ item, itemIndex }">\n            <sw-select-field v-model:value="Selection[itemIndex]" @change:value="setLinePrice(itemIndex, $event, item.unitPrice)">\n                <option :value="0">0</option>\n                <option v-for="n in item.paid" :value="n">{{ n }}</option>\n            </sw-select-field>\n        </template>\n\n        <template #column-quantity="{ item }">\n            <span>{{ item.paid }}x</span>\n        </template>\n\n        <template #column-unitPrice="{ item }">\n            <span>{{ currencyFilter(item.unitPrice, order.currency.shortName) }}</span>\n        </template>\n\n        <template #column-totalPrice="{ item, itemIndex }">\n            <span>{{ currencyFilter(itemPrices[itemIndex], order.currency.shortName) }}</span>\n        </template>\n    </sw-data-grid>\n\n    <sw-container v-if="hasContent" columns="1fr 120px min-content" gap="15px" justify="stretch" align="stretch">\n        <div></div>\n        <sw-number-field class="moptWorldlineAmountToProcess" v-if="!lockedButton" @change="setCustomAmount" :value="amountToProcess" :min="0" :max="maxAmountToProcess" :fillDigits="true" />\n        <div v-else ></div>\n        <sw-button-process\n                :isLoading="isLoading"\n                :disabled="transactionDisabled"\n                :processSuccess="transactionSuccess"\n                variant="ghost-danger"\n                @click="refund"\n        >{{ $tc(\'worldline.refund-payment-button.button\') }}</sw-button-process>\n\n    </sw-container>\n\n    <div class="table--no-content" v-if="!hasContent">{{ $tc(\'worldline.transaction-control.table.empty\') }}</div>\n</sw-container>',inject:["transactionsControl"],mixins:[p.getByName("notification")],props:{order:{type:Object,required:!0},transactionId:{type:String,required:!0},paymentStatus:{type:Array,required:!0},maxRefund:{type:Number},lockedButton:{type:Boolean,required:!0}},data(){return{transactionSuccess:!1,Selection:[],isLoading:!1,itemPrices:[],amountToProcess:0}},mounted(){for(let e=0;e<this.orderLineItems.length;e++)this.itemPrices.push(0),this.Selection.push(0)},computed:{totalSelections(){return this.Selection.reduce((e,t)=>e+t,0)},maxAmountToProcess(){return isNaN(this.maxRefund)?this.paymentStatus.reduce((e,t)=>e+t.paid*t.unitPrice,0):this.maxRefund},orderLineItems(){return this.paymentStatus.filter(e=>e.paid>0)},hasContent(){return this.orderLineItems.length>0},taxStatus(){return y(this.order,"taxStatus","")},unitPriceLabel(){return this.$tc("worldline.transaction-control.table.unitPrice")},linePriceLabel(){return"gross"===this.taxStatus?"sw-order.detailBase.columnTotalPriceGross":"sw-order.detailBase.columnTotalPriceNet"},getLineItemColumns(){return[{property:"quantity",dataIndex:"paid",label:"sw-order.detailBase.columnQuantity",allowResize:!1,align:"right",width:"100px"},{property:"refund",dataIndex:"paid",label:"worldline.transaction-control.table.selected",allowResize:!1,align:"right",width:"150px"},{property:"label",dataIndex:"label",label:"sw-order.detailBase.columnProductName",allowResize:!1,primary:!0,multiLine:!0},{property:"unitPrice",dataIndex:"unitPrice",label:this.unitPriceLabel,allowResize:!1,align:"right",width:"120px"},{property:"totalPrice",dataIndex:"totalPrice",label:this.linePriceLabel,allowResize:!1,align:"right",width:"120px"}]},payloadItems(){let e=[];return this.orderLineItems.forEach((t,n)=>{e.push({id:t.id,quantity:this.Selection[n]})}),e},transactionDisabled(){return 0===this.amountToProcess&&0===this.totalSelections},currencyFilter(){return h.getByName("currency")}},methods:{refund(){let e={transactionId:this.transactionId,amount:this.amountToProcess,items:this.payloadItems};this.transactionsControl.refund(e).then(e=>{e.success?(this.transactionSuccess=!0,setTimeout(()=>{location.reload()},1e3)):this.createNotificationError({title:this.$tc("worldline.capture-payment-button.title"),message:this.$tc("worldline.capture-payment-button.error")+e.message})}).finally(()=>{})},setPriceSum(){this.amountToProcess=Math.min(this.itemPrices.reduce((e,t)=>e+t),this.maxAmountToProcess)},setLinePrice(e,t,n){this.itemPrices[e]=n*t,this.setPriceSum()},setCustomAmount(e){this.amountToProcess=e}}});let{Component:f,Utils:b,Filter:w}=Shopware,{get:v,format:P}=b;f.register("mo-orders-refunded",{template:'<sw-container type="row" gap="15px">\n    <sw-data-grid\n            v-if="hasContent"\n            ref="dataGrid"\n            class="sw-order-line-items-grid__data-grid"\n            identifier="mo-order-line-item-grid"\n            :data-source="orderLineItems"\n            :columns="getLineItemColumns"\n            :show-settings="false"\n            :show-selection="false"\n            :showActions="false"\n            :is-loading="isLoading"\n            :compactMode="false"\n    >\n        <template #column-quantity="{ item }">\n            <span>{{ item.refunded }}x</span>\n        </template>\n\n        <template #column-unitPrice="{ item }">\n            <span>{{ currencyFilter(item.unitPrice, order.currency.shortName) }}</span>\n        </template>\n\n        <template #column-totalPrice="{ item, itemIndex }">\n            <span>{{ currencyFilter(itemPrices[itemIndex], order.currency.shortName) }}</span>\n        </template>\n    </sw-data-grid>\n\n    <sw-container v-if="hasContent" columns="1fr 120px" gap="15px" justify="stretch" align="stretch">\n        <div></div>\n        <sw-text-field :value="currencyFilter(totalAmount, order.currency.shortName)" disabled />\n    </sw-container>\n\n    <div class="table--no-content" v-if="!hasContent">{{ $tc(\'worldline.transaction-control.table.empty\') }}</div>\n</sw-container>',inject:["transactionsControl"],props:{order:{type:Object,required:!0},paymentStatus:{type:Array,required:!0}},data(){return{isLoading:!1,itemPrices:[],totalAmount:0}},mounted(){this.orderLineItems.forEach(e=>{let t=e.unitPrice*e.refunded;this.itemPrices.push(t),this.totalAmount+=t})},computed:{orderLineItems(){return this.paymentStatus.filter(e=>e.refunded>0)},hasContent(){return this.orderLineItems.length>0},taxStatus(){return v(this.order,"taxStatus","")},unitPriceLabel(){return this.$tc("worldline.transaction-control.table.unitPrice")},linePriceLabel(){return"gross"===this.taxStatus?"sw-order.detailBase.columnTotalPriceGross":"sw-order.detailBase.columnTotalPriceNet"},getLineItemColumns(){return[{property:"quantity",dataIndex:"paid",label:"sw-order.detailBase.columnQuantity",allowResize:!1,align:"right",width:"100px"},{property:"label",dataIndex:"label",label:"sw-order.detailBase.columnProductName",allowResize:!1,primary:!0,multiLine:!0},{property:"unitPrice",dataIndex:"unitPrice",label:this.unitPriceLabel,allowResize:!1,align:"right",width:"120px"},{property:"totalPrice",dataIndex:"totalPrice",label:this.linePriceLabel,allowResize:!1,align:"right",width:"120px"}]},currencyFilter(){return w.getByName("currency")}}});let{Component:C,Utils:S,Filter:x}=Shopware,{get:I,format:L}=S;C.register("mo-orders-canceled",{template:'<sw-container type="row" gap="15px">\n    <sw-data-grid\n            v-if="hasContent"\n            ref="dataGrid"\n            class="sw-order-line-items-grid__data-grid"\n            identifier="mo-order-line-item-grid"\n            :data-source="orderLineItems"\n            :columns="getLineItemColumns"\n            :show-settings="false"\n            :show-selection="false"\n            :showActions="false"\n            :is-loading="isLoading"\n            :compactMode="false"\n    >\n        <template #column-quantity="{ item }">\n            <span>{{ item.canceled }}x</span>\n        </template>\n\n        <template #column-unitPrice="{ item }">\n            <span>{{ currencyFilter(item.unitPrice, order.currency.shortName) }}</span>\n        </template>\n\n        <template #column-totalPrice="{ item, itemIndex }">\n            <span>{{ currencyFilter(itemPrices[itemIndex], order.currency.shortName) }}</span>\n        </template>\n    </sw-data-grid>\n\n    <sw-container v-if="hasContent" columns="1fr 120px" gap="15px" justify="stretch" align="stretch">\n        <div></div>\n        <sw-text-field :value="currencyFiler(totalAmount, order.currency.shortName)" disabled />\n    </sw-container>\n\n    <div class="table--no-content" v-if="!hasContent">{{ $tc(\'worldline.transaction-control.table.empty\') }}</div>\n</sw-container>',inject:["transactionsControl"],props:{order:{type:Object,required:!0},paymentStatus:{type:Array,required:!0}},data(){return{isLoading:!1,itemPrices:[],totalAmount:0}},mounted(){this.orderLineItems.forEach(e=>{let t=e.unitPrice*e.canceled;this.itemPrices.push(t),this.totalAmount+=t})},computed:{orderLineItems(){return this.paymentStatus.filter(e=>e.canceled>0)},hasContent(){return this.orderLineItems.length>0},taxStatus(){return I(this.order,"taxStatus","")},unitPriceLabel(){return this.$tc("worldline.transaction-control.table.unitPrice")},linePriceLabel(){return"gross"===this.taxStatus?"sw-order.detailBase.columnTotalPriceGross":"sw-order.detailBase.columnTotalPriceNet"},getLineItemColumns(){return[{property:"quantity",dataIndex:"paid",label:"sw-order.detailBase.columnQuantity",allowResize:!1,align:"right",width:"100px"},{property:"label",dataIndex:"label",label:"sw-order.detailBase.columnProductName",allowResize:!1,primary:!0,multiLine:!0},{property:"unitPrice",dataIndex:"unitPrice",label:this.unitPriceLabel,allowResize:!1,align:"right",width:"120px"},{property:"totalPrice",dataIndex:"totalPrice",label:this.linePriceLabel,allowResize:!1,align:"right",width:"120px"}]},currencyFilter(){return x.getByName("currency")}}});let{Component:A,Mixin:k}=Shopware;A.register("config-tabs",{template:"<div>\n    <sw-button-process\n        @click=\"showSandboxCredentials\"\n    >{{ $tc('worldline.show-sandbox-credentials-button.label') }}</sw-button-process>\n    <sw-button-process\n        @click=\"showLiveCredentials\"\n    >{{ $tc('worldline.show-live-credentials-button.label') }}</sw-button-process>\n</div>\n",props:["label"],inject:["apiTest"],mixins:[k.getByName("notification")],data(){return{sandboxClasses:["sw-system-config--field-mopt-worldline-config-merchant-id","sw-system-config--field-mopt-worldline-config-api-key","sw-system-config--field-mopt-worldline-config-api-secret","sw-system-config--field-mopt-worldline-config-webhook-key","sw-system-config--field-mopt-worldline-config-webhook-secret","sw-system-config--field-mopt-worldline-config-sandbox-endpoint","sw-system-config--field-mopt-worldline-config-main-return-server-url","sw-system-config--field-mopt-worldline-config-sandbox-api-test"],liveClasses:["sw-system-config--field-mopt-worldline-config-live-merchant-id","sw-system-config--field-mopt-worldline-config-live-api-key","sw-system-config--field-mopt-worldline-config-live-api-secret","sw-system-config--field-mopt-worldline-config-live-webhook-key","sw-system-config--field-mopt-worldline-config-live-webhook-secret","sw-system-config--field-mopt-worldline-config-live-endpoint","sw-system-config--field-mopt-worldline-config-live-main-return-server-url","sw-system-config--field-mopt-worldline-config-live-api-test"]}},computed:{},methods:{hideCredentials(){this.sandboxClasses.forEach(e=>{document.getElementsByClassName(e)[0].style.display="none"}),this.liveClasses.forEach(e=>{document.getElementsByClassName(e)[0].style.display="none"})},showSandboxCredentials(){this.sandboxClasses.forEach(e=>{document.getElementsByClassName(e)[0].style.display="block"}),this.liveClasses.forEach(e=>{document.getElementsByClassName(e)[0].style.display="none"})},showLiveCredentials(){this.sandboxClasses.forEach(e=>{document.getElementsByClassName(e)[0].style.display="none"}),this.liveClasses.forEach(e=>{document.getElementsByClassName(e)[0].style.display="block"})}},mounted(){this.hideCredentials()}});let{Component:B,Utils:T,Mixin:$}=Shopware,{get:N,format:O}=T;B.register("mo-order-buttons",{template:'<sw-container type="row" gap="15px">\n    <sw-container columns="1fr min-content min-content" gap="15px" justify="stretch" align="stretch">\n        <template v-if="!!unprocessedLineItems.length">\n            <sw-button-process\n                    :isLoading="isLoading"\n                    :processSuccess="transactionSuccess.capture"\n                    variant="ghost"\n                    @click="capture"\n            >{{ $tc(\'worldline.capture-payment-button.button\') }}</sw-button-process>\n            <div></div>\n\n            <sw-button-process\n                    :isLoading="isLoading"\n                    :processSuccess="transactionSuccess.cancel"\n                    variant="ghost-danger"\n                    @click="cancel"\n            >{{ $tc(\'worldline.cancel-payment-button.button\') }}</sw-button-process>\n        </template>\n        <template v-if="!!paidLineItems.length">\n            <div></div>\n            <div></div>\n            <sw-button-process\n                    :isLoading="isLoading"\n                    :processSuccess="transactionSuccess.refund"\n                    variant="ghost-danger"\n                    @click="refund"\n            >{{ $tc(\'worldline.refund-payment-button.button\') }}</sw-button-process>\n        </template>\n    </sw-container>\n</sw-container>',inject:["transactionsControl"],mixins:[$.getByName("notification")],props:{order:{type:Object,required:!0},transactionId:{type:String,required:!0},paymentStatus:{type:Array,required:!0},maxCapture:{type:Number,required:!0},maxRefund:{type:Number}},data(){return{transactionSuccess:{capture:!1,cancel:!1,refund:!1},isLoading:!1}},computed:{unprocessedAmount(){return isNaN(this.maxCapture)?this.paymentStatus.reduce((e,t)=>e+t.unprocessed*t.unitPrice,0):this.maxCapture},paidAmount(){return isNaN(this.maxRefund)?this.paymentStatus.reduce((e,t)=>e+t.paid*t.unitPrice,0):this.maxRefund},unprocessedLineItems(){return this.paymentStatus.filter(e=>e.unprocessed>0)},paidLineItems(){return this.paymentStatus.filter(e=>e.paid>0)},unprocessedPayload(){let e=[];return this.unprocessedLineItems.forEach(t=>{e.push({id:t.id,quantity:t.unprocessed})}),e},paidPayload(){let e=[];return this.paidLineItems.forEach(t=>{e.push({id:t.id,quantity:t.paid})}),e}},methods:{capture(){let e={transactionId:this.transactionId,amount:this.unprocessedAmount,items:this.unprocessedPayload};this.transactionsControl.capture(e).then(e=>{e.success?(this.transactionSuccess.capture=!0,setTimeout(()=>{location.reload()},1e3)):this.createNotificationError({title:this.$tc("worldline.capture-payment-button.title"),message:this.$tc("worldline.capture-payment-button.error")+e.message})}).finally(()=>{this.isLoading=!1})},cancel(){this.isLoading=!0;let e={transactionId:this.transactionId,amount:this.unprocessedAmount,items:this.unprocessedPayload};this.transactionsControl.cancel(e).then(e=>{e.success?(this.transactionSuccess.cancel=!0,setTimeout(()=>{location.reload()},1e3)):this.createNotificationError({title:this.$tc("worldline.refund-payment-button.title"),message:this.$tc("worldline.refund-payment-button.error")+e.message})}).finally(()=>{this.isLoading=!1})},refund(){let e={transactionId:this.transactionId,amount:this.paidAmount,items:this.paidPayload};this.transactionsControl.refund(e).then(e=>{e.success?(this.transactionSuccess.refund=!0,setTimeout(()=>{location.reload()},1e3)):this.createNotificationError({title:this.$tc("worldline.capture-payment-button.title"),message:this.$tc("worldline.capture-payment-button.error")+e.message})}).finally(()=>{this.isLoading=!1})}}}),n(858);let{Component:R}=Shopware;R.override("sw-order-detail-details",{template:'{% block sw_order_detail_details_custom_fields %}\n    {% parent() %}\n    <sw-card v-if="isReady" :title="$t(\'worldline.worldline-order.detail.cardLabel\')"\n             :isLoading="isLoading">\n        <sw-container\n                type="row"\n                class="sw-order-line-items-grid"\n                gap="15px"\n        >\n            <sw-tabs v-if="showPartialOperations" @new-item-active="setActiveTab" :small="false">\n                <template v-for="tab in tabs">\n                    <sw-tabs-item :key="tab.name" :name="tab.name" :active="tab.name === activeTab">\n                        {{ $tc(\'worldline.transaction-control.tabs.\' + tab.name) }}\n                    </sw-tabs-item>\n                </template>\n            </sw-tabs>\n            <template v-if="showPartialOperations">\n                <mo-orders-unprocessed v-if="activeTab === \'unprocessed\'" :order="order" :transactionId="transactionId" :paymentStatus="worldlinePaymentStatus" :maxCapture="allowedAmounts.WorldlineCaptureAmount" :lockedButton="lockedButtons" />\n                <mo-orders-paid v-if="activeTab === \'paid\'" :order="order" :transactionId="transactionId" :paymentStatus="worldlinePaymentStatus" :maxRefund="allowedAmounts.WorldlineRefundAmount" :lockedButton="lockedButtons" />\n                <mo-orders-refunded v-if="activeTab === \'refunded\'" :order="order" :paymentStatus="worldlinePaymentStatus" />\n                <mo-orders-canceled v-if="activeTab === \'canceled\'" :order="order" :paymentStatus="worldlinePaymentStatus" />\n            </template>\n            <div v-else>\n                <mo-order-buttons\n                        :order="order"\n                        :transactionId="transactionId"\n                        :paymentStatus="worldlinePaymentStatus"\n                        :maxCapture="allowedAmounts.WorldlineCaptureAmount"\n                        :maxRefund="allowedAmounts.WorldlineRefundAmount"\n                />\n            </div>\n            <sw-container v-if="transactionStatus" gap="15px">\n                <sw-textarea-field :value="transactionLogs"\n                                   type="textarea"\n                                   :label="$t(\'worldline.transaction-control.logs.label\')"\n                                   :placeholder="$t(\'worldline.transaction-control.logs.placeholder\')"\n                                   disabled\n                />\n                <sw-button :isLoading="isLoading" @click="statusCheck">{{ $tc(\'worldline.check-status-button.button\') }}</sw-button>\n            </sw-container>\n\n            <sw-button\n                    v-if="isUnpaidAdminOrder"\n                    @click="payByAdmin"\n                    variant="ghost"\n                    :isLoading="isLoading"\n            >\n                {{ $tc(\'worldline.transaction-control.buttons.adminPay\') }}\n            </sw-button>\n        </sw-container>\n    </sw-card>\n{% endblock %}\n',inject:["transactionsControl"],data(){return{activeTab:"unprocessed",tabs:[{name:"unprocessed"},{name:"paid"},{name:"refunded"},{name:"canceled"}],transactionStatus:!1,partialOperations:!1,transactionLogs:"",worldlinePaymentStatus:[],isLoading:!1,isUnpaidAdminOrder:!1,adminPayFinishUrl:"",adminPayErrorUrl:"",swAccessKey:"",isWorldlineOnlinePayment:!1,lockedButtons:!1,allowedAmounts:null,isReady:!1}},created(){this.getPanelConfig()},computed:{showPartialOperations(){return this.transactionStatus&&this.partialOperations},transactionId(){return this.order.customFields?.payment_transaction_id},paymentMethod(){return this.order.transactions.last().paymentMethod.customFields.worldline_payment_method_id},transactionStatusId(){return this.order.customFields?.payment_transaction_status},getOrderId(){return this.order.id},isAdminOrder(){return null!==this.order.createdBy},isNoTransactionPresent(){return!this.transactionId},isNoCompleteTransactionPresent(){return!!this.isNoTransactionPresent||0==this.transactionStatusId}},methods:{setActiveTab(e){this.activeTab=e.name},getPanelConfig(){this.transactionsControl.getConfig({orderId:this.order.id}).then(e=>{this.adminPayFinishUrl=e.adminPayFinishUrl,this.adminPayErrorUrl=e.adminPayErrorUrl,this.isWorldlineOnlinePayment=e.isFullRedirectMethod,this.swAccessKey=e.swAccessKey}).finally(()=>{this.isUnpaidAdminOrder=this.isAdminOrder&&this.isWorldlineOnlinePayment&&this.isNoCompleteTransactionPresent,this.statusCheck()})},setInitialTab(){0===this.worldlinePaymentStatus.filter(e=>e.unprocessed>0).length&&(this.worldlinePaymentStatus.filter(e=>e.paid>0).length>0?this.activeTab="paid":this.worldlinePaymentStatus.filter(e=>e.refunded>0).length>0?this.activeTab="refunded":this.worldlinePaymentStatus.filter(e=>e.canceled>0).length>0&&(this.activeTab="canceled"))},getValues(){if(null===this.transactionId){this.isLoading=!1;return}this.transactionsControl.enableButtons({transactionId:this.transactionId}).then(e=>{e.success?(this.worldlinePaymentStatus=e.worldlinePaymentStatus,this.transactionLogs=e.log,this.allowedAmounts=e.allowedAmounts,this.lockedButtons=e.worldlineLockButtons,this.setInitialTab(),this.transactionStatus=!0,this.partialOperations=e.partialOperationsEnabled):this.createNotificationError({title:this.$tc("worldline.check-status-button.title"),message:this.$tc("worldline.check-status-button.error")+e.message})}).finally(()=>{this.isLoading=!1,this.isReady=!0})},statusCheck(){this.isLoading=!0,this.transactionsControl.statusCheck({transactionId:this.transactionId}).then(e=>{e.success?this.getValues():(this.isUnpaidAdminOrder||(this.transactionStatus=!1),this.isLoading=!1)})},payByAdmin(){this.isLoading=!0;let e={orderId:this.getOrderId,finishUrl:this.adminPayFinishUrl,errorUrl:this.adminPayErrorUrl};fetch("/store-api/handle-payment",{method:"POST",headers:{"Content-Type":"application/json","sw-access-key":this.swAccessKey},body:JSON.stringify(e)}).then(e=>{e.ok?e.json().then(e=>{let t=null,n=null;t=open(e.redirectUrl),n=setInterval(()=>{t.closed&&(clearInterval(n),location.reload())},500)}):(console.error(e),this.createNotificationError({title:this.$tc("worldline.check-status-button.title"),message:this.$tc("worldline.transaction-control.buttons.error")}))}).catch(e=>{console.error(e),this.createNotificationError({title:this.$tc("worldline.check-status-button.title"),message:this.$tc("worldline.check-status-button.error")+e})}).finally(()=>{this.isLoading=!1})}}});let{Component:_}=Shopware;_.override("sw-settings-payment-detail",{template:'{% block sw_settings_payment_detail_base_content_media_upload %}\n    {% parent() %}\n    <sw-container v-if="showOneyField">\n        <sw-field\n                id="oneyPaymentOption"\n                name="oneyPaymentOption"\n                @change="setOneyPaymentOption"\n                :value="oneyPaymentOptionValue"\n                type="text"\n                class="sw-settings-payment-detail__field-position"\n                :disabled="!acl.can(\'payment.editor\')"\n                :label="$tc(\'worldline.payment-methods.oney-label\')"\n        />\n    </sw-container>\n{% endblock %}\n',inject:["transactionsControl"],data(){return{currentPaymentMethodId:"",oneyPaymentOptionValue:"",oneyIds:[5110,5125,5600]}},created(){this.$watch("paymentMethod",e=>{this.currentPaymentMethodId=e.customFields.worldline_payment_method_id}),this.getInitialData()},computed:{showOneyField(){return this.oneyIds.includes(this.currentPaymentMethodId)}},methods:{getInitialData(){this.loading=!0,this.transactionsControl.getOneyPaymentConfig({}).then(e=>{this.oneyPaymentOptionValue=e.value,document.getElementById("oneyPaymentOption").value=e.value}).finally(()=>{this.loading=!1})},setOneyPaymentOption(e){this.loading=!0,this.oneyPaymentOptionValue=e,this.transactionsControl.setOneyPaymentConfig({oneyPaymentOption:this.oneyPaymentOptionValue}).then(e=>{}).finally(()=>{this.loading=!1})}}});var E=JSON.parse('{"worldline":{"api-test-button":{"title":"API Test","success":"Verbindung wurde erfolgreich getestet.","error":"Verbindung konnte nicht hergestellt werden. Bitte pr\xfcfe die Zugangsdaten.","button":"Test Verbindung"},"payment-method-button":{"headline":"Zahlungsarten","subline":"Bitte Zahlungsarten f\xfcr Ihren Checkout ausw\xe4hlen","activeLabel":"Aktiv","linkLabel":"Link zum Kanal","selectAll":"alle ausw\xe4hlen","deselectAll":"alle abw\xe4hlen","save":"speichern","request":"Verf\xfcgbare Zahlungsarten werden abgerufen...","requestEmpty":"Keine Zahlungsarten zum Anzeigen gefunden","title":"Verf\xfcgbare Zahlungsmittel abrufen","error":"Verbindung konnte nicht hergestellt werden. Bitte \xfcberpr\xfcfen Sie die Zugangsdaten."}}}'),M=JSON.parse('{"worldline":{"api-test-button":{"title":"API Test","success":"Connection test was successful.","error":"Connection could not be established. Please check the access data.","button":"Test connection"},"check-status-button":{"title":"Status check","success":"Status was successfully updated.","error":"Operation failed.","button":"Check status"},"capture-payment-button":{"title":"Capture payment","success":"Payment was successfully captured.","error":"Operation failed.","button":"Capture payment"},"cancel-payment-button":{"title":"Cancel payment","success":"Payment was successfully canceled.","error":"Operation failed.","button":"Cancel payment"},"refund-payment-button":{"title":"Refund payment","success":"Payment was successfully refunded.","error":"Operation failed.","button":"Refund payment"},"save-payment-card":{"label":"Save payment card","deleteButton":"Delete","deleted":"Card has been deleted."},"show-sandbox-credentials-button":{"label":"Sandbox credentials"},"show-live-credentials-button":{"label":"Live credentials"},"forwardToPaymentHandler":"Forwarding to payment handler.","errorWithConfirmRedirect":"Error. Redirecting to confirm page.","errorWithWebhookRequest":"Error with webhook request.","buildingOrder":"Building order","started":"Started","captureRequested":"Capture requested","gettingPaymentStatus":"Getting payment status","tryingToCapture":"Trying to capture","unsupportedStatus":"Unsupported status","operationIsNotPossibleDueToCurrentStatus":"Operation is not possible due to current status","maxAmountExceeded":"Maximum amount exceeded.","wrongAmountRequested":"Wrong amount requested.","gettingPaymentDetails":"Getting payment details","paymentOpen":"Payment is open","paymentInProgress":"Payment is in progress","paymentPaid":"Paid","paymentRefunded":"Payment refunded","paymentCanceled":"Payment cancelled","paymentFailed":"Payment failed","refundInProgress":"Refund in progress","cantFindCurrencyOfOrder":"Cannot find currency of order","statusUpdateError":"Status update error","statusUpdateRequestSent":"Status update request sent","noTransactionForThisOrder":"No transaction for this order","success":"Success","failed":"Operation failed.","worldline-order":{"detail":{"cardLabel":"Worldline transaction control","bundleSelectLabel":"Associated bundles","bundleSelectPlaceholder":"Add bundle..."}},"transactionStatus":{"refunded":"Refunded","cancelled":"Cancelled","captured":"Captured","created":"Created","rejected":"Rejected","rejectedCapture":"Capture rejected","cancellationDeclined":"Cancellation declined","redirected":"Redirected","pendingCapture":"Pending capture","authorizationRequested":"Authorization requested","captureRequested":"Capture requested","refundRequested":"Refund requested"},"payment-method-button":{"headline":"Payment Methods","subline":"Please select payment methods for your checkout","selectAll":"select all","activeLabel":"Active","linkLabel":"Link to channel","deselectAll":"deselect all","save":"Save","request":"Requesting available payment methods...","requestEmpty":"No payment methods to display","title":"Get available payment methods","error":"Connection could not be established. Please check the access data.","success":"Changes successfully saved","errorAPI":"There was an error on save","APITitle":"Payment method saving"},"configFile":{"merchantId":"Merchant Id","apiKey":"API Key","aspSecret":"API Secret","webhookKey":"Webhook key","webhookSecret":"Webhook secret","liveEndpoint":"Live endpoint","sandboxEndpoint":"Sandbox endpoint","returnUrl":"Return URL","isLiveMode":"Is live mode","logLevel":"Log level","logLevelHint":"Choose the loglevel of non-error messages","logLevelDebug":"DEBUG","logLevelError":"ERROR","logLevelInfo":"INFO","automaticCapture":"Automatic capture","disabled":"Disabled","0_day":"Immediately","1_day":"In 1 day","2_day":"In 2 days","3_day":"In 3 days","4_day":"In 4 days","5_day":"In 5 days"},"composer":{"label":"Worldline Online Payments.","description":"Worldline Online Payments.","extraDescription":"Certified Worldline online payments extension for Shopware 6"},"transaction-control":{"logs":{"label":"Payment log","placeholder":"nothing here..."},"tabs":{"unprocessed":"Unprocessed","paid":"Paid","refunded":"Refunded","canceled":"Canceled"},"table":{"selected":"Selected","unitPrice":"Unit Price","empty":"No items with current status in order"},"buttons":{"adminPay":"Pay for order","error":"Something went wrong"}},"payment-methods":{"oney-label":"Oney custom field"}}}');Shopware.Locale.extend("de-DE",E),Shopware.Locale.extend("en-GB",M)}()})();