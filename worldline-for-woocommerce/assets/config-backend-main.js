!function(){"use strict";var e={};function o(e,o,t,n,r,c,l){try{var i=e[c](l),a=i.value}catch(e){return void t(e)}i.done?o(a):Promise.resolve(a).then(n,r)}function t(e){return function(){var t=this,n=arguments;return new Promise((function(r,c){var l=e.apply(t,n);function i(e){o(l,r,c,i,a,"next",e)}function a(e){o(l,r,c,i,a,"throw",e)}i(void 0)}))}}e.n=function(o){var t=o&&o.__esModule?function(){return o.default}:function(){return o};return e.d(t,{a:t}),t},e.d=function(o,t){for(var n in t)e.o(t,n)&&!e.o(o,n)&&Object.defineProperty(o,n,{enumerable:!0,get:t[n]})},e.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)};var n=window.regeneratorRuntime,r=e.n(n),c=function(e){return"string"==typeof e?document.querySelector(e):e},l=function(e,o){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=c(e);if(n){var r=n.style.getPropertyValue("display");if(o)"none"===r&&n.style.removeProperty("display"),function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}(n)||n.style.setProperty("display","block");else{if("none"===r)return;n.style.setProperty("display","none",t?"important":"")}}},i=function(e,o,t){var n=c(e);n&&(o?n.classList.remove(t):n.classList.add(t))};function a(e){var o,t=document.querySelector(e);return null!==(o=null==t?void 0:t.closest("tr"))&&void 0!==o?o:null}function d(e,o){var t,n=document.querySelector(".wlop-logo-preview"),r=document.querySelector(".wlop-logo-delete"),c=document.querySelector("#woocommerce_worldline-for-woocommerce_logo_url");n&&r&&c&&(c.value=o?"":e,o&&(n.src=null!==(t=n.dataset.defaultUrl)&&void 0!==t?t:"",n.style.display="block",r.style.display="none"),!o&&e&&(n.src=e,n.style.display="block",r.style.display="inline-block"),o||e||(n.src="",n.style.display="none",r.style.display="none"))}function u(){return(u=t(r().mark((function e(){var o,t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,jQuery.ajax({type:"post",dataType:"json",url:"/wp-admin/admin-ajax.php",data:{action:"wlop_hosted_tokenization_config"}});case 3:(o=e.sent).success&&o.data.logo_url?(d(o.data.logo_url,o.data.is_default),(t=document.querySelector("#woocommerce_worldline-for-woocommerce_logo_url"))&&(t.value=o.data.logo_url)):d("",!0),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Failed to fetch logo URL:",e.t0),d("",!0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function m(){var e=document.querySelector("#woocommerce_worldline-for-woocommerce_logo_url");e&&(e.value="",e.dispatchEvent(new Event("change"))),d("",!0)}document.addEventListener("DOMContentLoaded",(function(){var e,o=document.querySelector("#woocommerce_worldline-for-woocommerce_live_mode"),n=document.querySelector("#woocommerce_worldline-for-woocommerce_authorization_mode"),c=document.querySelector("#woocommerce_worldline-for-woocommerce_enable_3ds"),s=document.querySelector("#woocommerce_worldline-for-woocommerce_request_3ds_exemption"),w=document.querySelector("#woocommerce_worldline-for-woocommerce_3ds_exemption_type"),p=document.querySelector("#woocommerce_worldline-for-woocommerce_3ds_exemption_limit"),_=null,f=null;function v(){if(o){var e=o.checked;i(a("#woocommerce_worldline-for-woocommerce_live_api_key"),e,"wlop-hidden"),i(a("#woocommerce_worldline-for-woocommerce_live_api_secret"),e,"wlop-hidden"),i(a("#woocommerce_worldline-for-woocommerce_live_api_endpoint"),e,"wlop-hidden"),i(a("#woocommerce_worldline-for-woocommerce_live_webhook_id"),e,"wlop-hidden"),i(a("#woocommerce_worldline-for-woocommerce_live_webhook_secret_key"),e,"wlop-hidden"),i(a("#woocommerce_worldline-for-woocommerce_test_api_key"),!e,"wlop-hidden"),i(a("#woocommerce_worldline-for-woocommerce_test_api_secret"),!e,"wlop-hidden"),i(a("#woocommerce_worldline-for-woocommerce_test_api_endpoint"),!e,"wlop-hidden"),i(a("#woocommerce_worldline-for-woocommerce_test_webhook_id"),!e,"wlop-hidden"),i(a("#woocommerce_worldline-for-woocommerce_test_webhook_secret_key"),!e,"wlop-hidden"),i(a("#wlopLiveAccountNote"),e,"wlop-hidden"),l("#wlopTestCreateAccountLink",!e),l("#wlopLiveCreateAccountLink",e),l("#wlopTestViewAccountLink",!e),l("#wlopLiveViewAccountLink",e)}}function y(){n&&(i(a("#woocommerce_worldline-for-woocommerce_credit_card_authorization_mode"),"authorization"===n.value,"wlop-hidden"),i(a("#woocommerce_worldline-for-woocommerce_capture_mode"),"authorization"===n.value,"wlop-hidden"))}function h(){c&&(i(a("#woocommerce_worldline-for-woocommerce_enforce_3dsv2"),c.checked,"wlop-hidden"),i(a("#woocommerce_worldline-for-woocommerce_request_3ds_exemption"),c.checked,"wlop-hidden"),s&&(i(a("#woocommerce_worldline-for-woocommerce_3ds_exemption_type"),c.checked&&s.checked,"wlop-hidden"),i(a("#woocommerce_worldline-for-woocommerce_3ds_exemption_limit"),c.checked&&s.checked,"wlop-hidden"),i("#woocommerce_worldline-for-woocommerce_3ds_exemption_warning",c.checked&&s.checked,"wlop-hidden")))}function g(){if(w&&p){var e=w.value,o=parseInt(p.value),t="low-value"===e?30:100;p.setAttribute("max",t.toString()),o>t&&(p.value=t.toString(),"transaction-risk-analysis"===_&&"low-value"===e&&(f=o)),"low-value"===_&&"transaction-risk-analysis"===e&&f&&f>30&&(p.value=f.toString(),f=null),_=e}}function k(){return(k=t(r().mark((function e(o,t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.writeText(t.value);case 3:n=o.textContent,o.textContent=o.dataset.copiedMessage,o.disabled=!0,setTimeout((function(){o.disabled=!1,o.textContent=n}),1e3),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),alert("Failed to copy, please select the address and copy it manually.");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}null==o||o.addEventListener("click",v),null==n||n.addEventListener("change",y),null==c||c.addEventListener("click",h),null==s||s.addEventListener("click",h),null==w||w.addEventListener("change",g),i(a("#woocommerce_worldline-for-woocommerce_logo_url"),!1,"wlop-hidden"),v(),y(),h(),g(),0!==(e=document.querySelectorAll(".wlop-button-copy")).length&&e.forEach((function(e){var o=e.dataset.copy,t=document.querySelector(o);t?e.addEventListener("click",(function(){return function(_x,e){return k.apply(this,arguments)}(e,t)})):console.error("Can't copy the value from field. The field doesn't exist.")})),function(){var e=document.querySelector(".wlop-logo-upload-button"),o=document.querySelector(".wlop-logo-delete"),t=document.querySelector(".wlop-logo-controls");if(e&&o&&t){var n=document.createElement("input");n.type="file",n.accept="image/png, image/gif, image/jpeg",n.style.display="none",document.body.appendChild(n),e.addEventListener("click",(function(){n.click()})),n.addEventListener("change",(function(e){var o,t,n=e.target;n.files&&n.files[0]&&(o=n.files[0],(t=new FormData).append("action","wlop_hosted_tokenization_config"),t.append("logo_file",o),jQuery.ajax({type:"post",url:"/wp-admin/admin-ajax.php",data:t,contentType:!1,processData:!1,success:function(e){if(e.success&&e.data.logo_url){d(e.data.logo_url,e.data.is_default);var o=document.querySelector("#woocommerce_worldline-for-woocommerce_logo_url");o&&(o.value=e.data.logo_url,o.dispatchEvent(new Event("change")))}else alert(e.data.message)},error:function(){alert("Failed to upload logo.")}}))})),o.addEventListener("click",m)}}(),function(){u.apply(this,arguments)}()}))}();